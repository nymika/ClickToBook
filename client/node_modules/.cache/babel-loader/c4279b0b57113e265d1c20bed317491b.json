{"ast":null,"code":"var _jsxFileName = \"/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.safelyParseJSON = json => {\n      // This function cannot be optimised, it's best to\n      // keep it small!\n      var parsed;\n\n      try {\n        parsed = JSON.parse(json);\n      } catch (e) {// Oh well, but whatever...\n      }\n\n      return parsed; // Could be undefined!\n    };\n\n    this.UserLogoutAPIHandler = () => {\n      const user = {// email: this.state.currentUser.email,\n        // _id : this.state.currentUser._id,\n        // token : this.state.usertoken\n      }; // localStorage.removeItem(\"currentUser\");\n      //         localStorage.removeItem(\"token\")\n      // , {headers : {authorization: `bearer ${localStorage.getItem(\"token\")}` }}\n\n      axios.defaults.headers.common['Authorization'] = localStorage.getItem(\"token\");\n      console.log('token is', localStorage.getItem(\"token\"));\n      axios.post('http://localhost:3001/users/logout', user).then(response => {\n        console.log(response.data);\n        localStorage.removeItem(\"currentUser\");\n        localStorage.removeItem(\"token\");\n      }).catch(e => alert(e));\n    };\n\n    this.submitHandler = e => {\n      this.UserLogoutAPIHandler();\n      this.loggedIn = false;\n    };\n\n    this.loggedIn = true;\n    const currentUserStorage = localStorage.getItem(\"currentUser\");\n    const token = localStorage.getItem(\"token\");\n    this.safelyParseJSON = this.safelyParseJSON.bind(this);\n    const currentUser = this.safelyParseJSON(currentUserStorage);\n    this.state = {\n      currentUser: currentUser,\n      usertoken: token\n    };\n    this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n    this.submitHandler = this.submitHandler.bind(this);\n  }\n\n  componentWillMount() {\n    if (this.loggedIn) this.props.history.replace('/');\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: styles.logoutbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: styles.heading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Do you want to log out?\"), React.createElement(\"button\", {\n      type: \"submit\",\n      className: styles.submitbtn,\n      onClick: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"LOGOUT\"));\n  }\n\n}\n\nexport default UserLogout;","map":{"version":3,"sources":["/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js"],"names":["React","Component","axios","styles","UserLogout","constructor","props","safelyParseJSON","json","parsed","JSON","parse","e","UserLogoutAPIHandler","user","defaults","headers","common","localStorage","getItem","console","log","post","then","response","data","removeItem","catch","alert","submitHandler","loggedIn","currentUserStorage","token","bind","currentUser","state","usertoken","componentWillMount","history","replace","render","logoutbox","heading","submitbtn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n    constructor(props) {\n        super(props);\n        this.loggedIn = true;\n        const currentUserStorage = localStorage.getItem(\"currentUser\");\n        const token = localStorage.getItem(\"token\")\n        this.safelyParseJSON = this.safelyParseJSON.bind(this)\n        const currentUser = this.safelyParseJSON(currentUserStorage)\n        this.state = {\n            currentUser: currentUser,\n            usertoken: token\n        };\n        this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n        this.submitHandler = this.submitHandler.bind(this);\n    }\n\n    safelyParseJSON = (json) => {\n        // This function cannot be optimised, it's best to\n        // keep it small!\n        var parsed\n\n        try {\n            parsed = JSON.parse(json)\n        } catch (e) {\n            // Oh well, but whatever...\n        }\n\n        return parsed // Could be undefined!\n    }\n\n    UserLogoutAPIHandler = () => {\n        const user = {\n            // email: this.state.currentUser.email,\n            // _id : this.state.currentUser._id,\n            // token : this.state.usertoken\n        };\n        // localStorage.removeItem(\"currentUser\");\n        //         localStorage.removeItem(\"token\")\n        // , {headers : {authorization: `bearer ${localStorage.getItem(\"token\")}` }}\n        axios.defaults.headers.common['Authorization'] = localStorage.getItem(\"token\")\n        console.log('token is', localStorage.getItem(\"token\"));\n        axios.post('http://localhost:3001/users/logout', user)\n            .then(response => {\n                console.log(response.data)\n                localStorage.removeItem(\"currentUser\");\n                localStorage.removeItem(\"token\")\n            }).catch((e) => alert(e));\n    }\n\n    submitHandler = (e) => {\n        this.UserLogoutAPIHandler();\n        this.loggedIn=false;\n    }\n    componentWillMount(){\n        if(this.loggedIn)\n            this.props.history.replace('/');\n    }\n\n    render() {\n        return (\n            <div className={styles.logoutbox}>\n                <h2 className={styles.heading}>Do you want to log out?</h2>\n                <button type=\"submit\" className={styles.submitbtn} onClick={this.submitHandler}>LOGOUT</button>\n            </div>\n        )\n    }\n}\nexport default UserLogout;"]},"metadata":{},"sourceType":"module"}