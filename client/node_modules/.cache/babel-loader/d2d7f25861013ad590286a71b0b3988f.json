{"ast":null,"code":"var _jsxFileName = \"/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.safelyParseJSON = json => {\n      var parsed;\n\n      try {\n        parsed = JSON.parse(json);\n      } catch (e) {// Oh well, but whatever...\n      }\n\n      return parsed; // Could be undefined!\n    };\n\n    this.UserLogoutAPIHandler = () => {\n      const user = {// email: this.state.currentUser.email,\n        // _id : this.state.currentUser._id,\n        // token : this.state.usertoken\n      }; // localStorage.removeItem(\"currentUser\");\n      //         localStorage.removeItem(\"token\")\n      // , {headers : {authorization: `bearer ${localStorage.getItem(\"token\")}` }}\n\n      axios.defaults.headers.common['Authorization'] = localStorage.getItem(\"token\");\n      console.log('token is', localStorage.getItem(\"token\"));\n      axios.post('http://localhost:4000/users/logout', user).then(response => {\n        console.log(response.data);\n        localStorage.removeItem(\"currentUser\");\n        localStorage.removeItem(\"token\");\n        this.props.history.replace('/');\n        window.location.reload(false);\n      }).catch(e => alert(e));\n    };\n\n    const currentUserStorage = localStorage.getItem(\"currentUser\");\n    const token = localStorage.getItem(\"token\");\n    this.safelyParseJSON = this.safelyParseJSON.bind(this);\n    const currentUser = this.safelyParseJSON(currentUserStorage);\n    this.state = {\n      currentUser: currentUser,\n      usertoken: token\n    };\n    this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: styles.logoutbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: styles.heading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Do you want to log out?\"), React.createElement(\"button\", {\n      type: \"submit\",\n      className: styles.submitbtn,\n      onClick: this.UserLogoutAPIHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"LOGOUT\"));\n  }\n\n}\n\nexport default UserLogout;","map":{"version":3,"sources":["/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js"],"names":["React","Component","axios","styles","UserLogout","constructor","props","safelyParseJSON","json","parsed","JSON","parse","e","UserLogoutAPIHandler","user","defaults","headers","common","localStorage","getItem","console","log","post","then","response","data","removeItem","history","replace","window","location","reload","catch","alert","currentUserStorage","token","bind","currentUser","state","usertoken","render","logoutbox","heading","submitbtn"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,oCAAnB;;AAEA,MAAMC,UAAN,SAAyBH,SAAzB,CAAmC;AAC/BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAanBC,eAbmB,GAaAC,IAAD,IAAU;AACxB,UAAIC,MAAJ;;AACA,UAAI;AACAA,QAAAA,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAT;AACH,OAFD,CAEE,OAAOI,CAAP,EAAU,CACR;AACH;;AACD,aAAOH,MAAP,CAPwB,CAOV;AACjB,KArBkB;;AAAA,SAuBnBI,oBAvBmB,GAuBI,MAAM;AACzB,YAAMC,IAAI,GAAG,CACT;AACA;AACA;AAHS,OAAb,CADyB,CAMzB;AACA;AACA;;AACAZ,MAAAA,KAAK,CAACa,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAjD;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBH,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAxB;AACAjB,MAAAA,KAAK,CAACoB,IAAN,CAAW,oCAAX,EAAiDR,IAAjD,EACKS,IADL,CACUC,QAAQ,IAAI;AACdJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,QAAQ,CAACC,IAArB;AACAP,QAAAA,YAAY,CAACQ,UAAb,CAAwB,aAAxB;AACAR,QAAAA,YAAY,CAACQ,UAAb,CAAwB,OAAxB;AACA,aAAKpB,KAAL,CAAWqB,OAAX,CAAmBC,OAAnB,CAA2B,GAA3B;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;AACH,OAPL,EAOOC,KAPP,CAOcpB,CAAD,IAAOqB,KAAK,CAACrB,CAAD,CAPzB;AAQH,KA1CkB;;AAEf,UAAMsB,kBAAkB,GAAGhB,YAAY,CAACC,OAAb,CAAqB,aAArB,CAA3B;AACA,UAAMgB,KAAK,GAAGjB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,SAAKZ,eAAL,GAAuB,KAAKA,eAAL,CAAqB6B,IAArB,CAA0B,IAA1B,CAAvB;AACA,UAAMC,WAAW,GAAG,KAAK9B,eAAL,CAAqB2B,kBAArB,CAApB;AACA,SAAKI,KAAL,GAAa;AACTD,MAAAA,WAAW,EAAEA,WADJ;AAETE,MAAAA,SAAS,EAAEJ;AAFF,KAAb;AAIA,SAAKtB,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BuB,IAA1B,CAA+B,IAA/B,CAA5B;AACH;;AAiCDI,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAErC,MAAM,CAACsC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAEtC,MAAM,CAACuC,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADJ,EAEI;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAEvC,MAAM,CAACwC,SAAxC;AAAmD,MAAA,OAAO,EAAE,KAAK9B,oBAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CADJ;AAMH;;AApD8B;;AAsDnC,eAAeT,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n    constructor(props) {\n        super(props);\n        const currentUserStorage = localStorage.getItem(\"currentUser\");\n        const token = localStorage.getItem(\"token\")\n        this.safelyParseJSON = this.safelyParseJSON.bind(this)\n        const currentUser = this.safelyParseJSON(currentUserStorage)\n        this.state = {\n            currentUser: currentUser,\n            usertoken: token\n        };\n        this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n    }\n\n    safelyParseJSON = (json) => {\n        var parsed\n        try {\n            parsed = JSON.parse(json)\n        } catch (e) {\n            // Oh well, but whatever...\n        }\n        return parsed // Could be undefined!\n    }\n\n    UserLogoutAPIHandler = () => {\n        const user = {\n            // email: this.state.currentUser.email,\n            // _id : this.state.currentUser._id,\n            // token : this.state.usertoken\n        };\n        // localStorage.removeItem(\"currentUser\");\n        //         localStorage.removeItem(\"token\")\n        // , {headers : {authorization: `bearer ${localStorage.getItem(\"token\")}` }}\n        axios.defaults.headers.common['Authorization'] = localStorage.getItem(\"token\")\n        console.log('token is', localStorage.getItem(\"token\"));\n        axios.post('http://localhost:4000/users/logout', user)\n            .then(response => {\n                console.log(response.data)\n                localStorage.removeItem(\"currentUser\");\n                localStorage.removeItem(\"token\");\n                this.props.history.replace('/');\n                window.location.reload(false);\n            }).catch((e) => alert(e));\n    }\n\n    render() {\n        return (\n            <div className={styles.logoutbox}>\n                <h2 className={styles.heading}>Do you want to log out?</h2>\n                <button type=\"submit\" className={styles.submitbtn} onClick={this.UserLogoutAPIHandler}>LOGOUT</button>\n            </div>\n        )\n    }\n}\nexport default UserLogout;"]},"metadata":{},"sourceType":"module"}