{"ast":null,"code":"var _jsxFileName = \"/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.safelyParseJSON = json => {\n      // This function cannot be optimised, it's best to\n      // keep it small!\n      var parsed;\n\n      try {\n        parsed = JSON.parse(json);\n      } catch (e) {// Oh well, but whatever...\n      }\n\n      return parsed; // Could be undefined!\n    };\n\n    this.UserLogoutAPIHandler = e => {\n      e.preventDefault();\n      const user = {// email: this.state.currentUser.email,\n        // _id : this.state.currentUser._id,\n        // token : this.state.usertoken\n      };\n      console.log('token is', localStorage.getItem(\"token\"));\n      axios.post('http://localhost:3001/users/logout', user, {\n        headers: {\n          authorization: `bearer ${localStorage.getItem(\"token\")}`\n        }\n      }).then(response => {\n        console.log(response.data);\n        localStorage.removeItem(\"currentUser\");\n        localStorage.removeItem(\"token\");\n      }).catch(e => alert(e));\n    };\n\n    const currentUserStorage = localStorage.getItem(\"currentUser\");\n    const token = localStorage.getItem(\"token\");\n    this.safelyParseJSON = this.safelyParseJSON.bind(this);\n    const currentUser = this.safelyParseJSON(currentUserStorage);\n    this.state = {\n      currentUser: currentUser,\n      usertoken: token\n    };\n    this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: styles.logoutbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: styles.heading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Do you want to log out?\"), React.createElement(\"button\", {\n      type: \"submit\",\n      className: styles.submitbtn,\n      onClick: this.UserLogoutAPIHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"LOGOUT\"));\n  }\n\n}\n\nexport default UserLogout;","map":{"version":3,"sources":["/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js"],"names":["React","Component","axios","styles","UserLogout","constructor","props","safelyParseJSON","json","parsed","JSON","parse","e","UserLogoutAPIHandler","preventDefault","user","console","log","localStorage","getItem","post","headers","authorization","then","response","data","removeItem","catch","alert","currentUserStorage","token","bind","currentUser","state","usertoken","render","logoutbox","heading","submitbtn"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,oCAAnB;;AAEA,MAAMC,UAAN,SAAyBH,SAAzB,CAAmC;AAC/BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAanBC,eAbmB,GAaAC,IAAD,IAAU;AACxB;AACA;AACA,UAAIC,MAAJ;;AAEA,UAAI;AACAA,QAAAA,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAT;AACH,OAFD,CAEE,OAAOI,CAAP,EAAU,CACR;AACH;;AAED,aAAOH,MAAP,CAXwB,CAWV;AACjB,KAzBkB;;AAAA,SA2BnBI,oBA3BmB,GA2BKD,CAAD,IAAO;AAC1BA,MAAAA,CAAC,CAACE,cAAF;AACA,YAAMC,IAAI,GAAG,CACT;AACA;AACA;AAHS,OAAb;AAKAC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAxB;AACAjB,MAAAA,KAAK,CAACkB,IAAN,CAAW,oCAAX,EAAiDL,IAAjD,EAAuD;AAACM,QAAAA,OAAO,EAAG;AAACC,UAAAA,aAAa,EAAG,UAASJ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAAxD;AAAX,OAAvD,EACKI,IADL,CACUC,QAAQ,IAAI;AACdR,QAAAA,OAAO,CAACC,GAAR,CAAYO,QAAQ,CAACC,IAArB;AACAP,QAAAA,YAAY,CAACQ,UAAb,CAAwB,aAAxB;AACAR,QAAAA,YAAY,CAACQ,UAAb,CAAwB,OAAxB;AACH,OALL,EAKOC,KALP,CAKcf,CAAD,IAAOgB,KAAK,CAAChB,CAAD,CALzB;AAMH,KAzCkB;;AAEf,UAAMiB,kBAAkB,GAAGX,YAAY,CAACC,OAAb,CAAqB,aAArB,CAA3B;AACA,UAAMW,KAAK,GAAGZ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,SAAKZ,eAAL,GAAuB,KAAKA,eAAL,CAAqBwB,IAArB,CAA0B,IAA1B,CAAvB;AACA,UAAMC,WAAW,GAAG,KAAKzB,eAAL,CAAqBsB,kBAArB,CAApB;AACA,SAAKI,KAAL,GAAa;AACTD,MAAAA,WAAW,EAAEA,WADJ;AAETE,MAAAA,SAAS,EAAGJ;AAFH,KAAb;AAIA,SAAKjB,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BkB,IAA1B,CAA+B,IAA/B,CAA5B;AACH;;AAgCDI,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAEhC,MAAM,CAACiC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAEjC,MAAM,CAACkC,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADJ,EAEI;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAElC,MAAM,CAACmC,SAAxC;AAAmD,MAAA,OAAO,EAAE,KAAKzB,oBAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CADJ;AAMH;;AAnD8B;;AAqDnC,eAAeT,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n    constructor(props) {\n        super(props);\n        const currentUserStorage = localStorage.getItem(\"currentUser\");\n        const token = localStorage.getItem(\"token\")\n        this.safelyParseJSON = this.safelyParseJSON.bind(this)\n        const currentUser = this.safelyParseJSON(currentUserStorage)\n        this.state = {\n            currentUser: currentUser,\n            usertoken : token\n        };\n        this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n    }\n\n    safelyParseJSON = (json) => {\n        // This function cannot be optimised, it's best to\n        // keep it small!\n        var parsed\n\n        try {\n            parsed = JSON.parse(json)\n        } catch (e) {\n            // Oh well, but whatever...\n        }\n\n        return parsed // Could be undefined!\n    }\n\n    UserLogoutAPIHandler = (e) => {\n        e.preventDefault()\n        const user = {\n            // email: this.state.currentUser.email,\n            // _id : this.state.currentUser._id,\n            // token : this.state.usertoken\n        };\n        console.log('token is', localStorage.getItem(\"token\"));\n        axios.post('http://localhost:3001/users/logout', user, {headers : {authorization: `bearer ${localStorage.getItem(\"token\")}` }})\n            .then(response => {\n                console.log(response.data)\n                localStorage.removeItem(\"currentUser\");\n                localStorage.removeItem(\"token\")\n            }).catch((e) => alert(e));\n    }\n\n    render() {\n        return (\n            <div className={styles.logoutbox}>\n                <h2 className={styles.heading}>Do you want to log out?</h2>\n                <button type=\"submit\" className={styles.submitbtn} onClick={this.UserLogoutAPIHandler}>LOGOUT</button>\n            </div>\n        )\n    }\n}\nexport default UserLogout;"]},"metadata":{},"sourceType":"module"}