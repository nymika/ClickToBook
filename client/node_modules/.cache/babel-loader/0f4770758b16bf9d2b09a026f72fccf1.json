{"ast":null,"code":"var _jsxFileName = \"/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.safelyParseJSON = json => {\n      // This function cannot be optimised, it's best to\n      // keep it small!\n      var parsed;\n\n      try {\n        parsed = JSON.parse(json);\n      } catch (e) {// Oh well, but whatever...\n      }\n\n      return parsed; // Could be undefined!\n    };\n\n    this.UserLogoutAPIHandler = e => {\n      e.preventDefault();\n      const user = {\n        email: this.state.currentUser.email,\n        _id: this.state.currentUser._id,\n        token: this.state.usertoken\n      };\n      console.log(user);\n      axios.post('http://localhost:3001/users/logout', user, {\n        header: {\n          authorization: token\n        }\n      }).then(response => {\n        console.log(response.data);\n        localStorage.removeItem(\"currentUser\");\n        localStorage.removeItem(\"token\");\n      }).catch(e => alert(e));\n    };\n\n    const currentUserStorage = localStorage.getItem(\"currentUser\");\n\n    const _token = localStorage.getItem(\"token\");\n\n    this.safelyParseJSON = this.safelyParseJSON.bind(this);\n    const currentUser = this.safelyParseJSON(currentUserStorage);\n    this.state = {\n      currentUser: currentUser,\n      usertoken: _token\n    };\n    this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: styles.logoutbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: styles.heading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Do you want to log out?\"), React.createElement(\"button\", {\n      type: \"submit\",\n      className: styles.submitbtn,\n      onClick: this.UserLogoutAPIHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"LOGOUT\"));\n  }\n\n}\n\nexport default UserLogout;","map":{"version":3,"sources":["/home/nymika/Documents/ClickToBook/clicktobook/client/src/components/Customer/userLogout.js"],"names":["React","Component","axios","styles","UserLogout","constructor","props","safelyParseJSON","json","parsed","JSON","parse","e","UserLogoutAPIHandler","preventDefault","user","email","state","currentUser","_id","token","usertoken","console","log","post","header","authorization","then","response","data","localStorage","removeItem","catch","alert","currentUserStorage","getItem","bind","render","logoutbox","heading","submitbtn"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,oCAAnB;;AAEA,MAAMC,UAAN,SAAyBH,SAAzB,CAAmC;AAC/BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAanBC,eAbmB,GAaAC,IAAD,IAAU;AACxB;AACA;AACA,UAAIC,MAAJ;;AAEA,UAAI;AACAA,QAAAA,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAT;AACH,OAFD,CAEE,OAAOI,CAAP,EAAU,CACR;AACH;;AAED,aAAOH,MAAP,CAXwB,CAWV;AACjB,KAzBkB;;AAAA,SA2BnBI,oBA3BmB,GA2BKD,CAAD,IAAO;AAC1BA,MAAAA,CAAC,CAACE,cAAF;AACA,YAAMC,IAAI,GAAG;AACTC,QAAAA,KAAK,EAAE,KAAKC,KAAL,CAAWC,WAAX,CAAuBF,KADrB;AAETG,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWC,WAAX,CAAuBC,GAFpB;AAGTC,QAAAA,KAAK,EAAG,KAAKH,KAAL,CAAWI;AAHV,OAAb;AAKAC,MAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AACAb,MAAAA,KAAK,CAACsB,IAAN,CAAW,oCAAX,EAAiDT,IAAjD,EAAuD;AAACU,QAAAA,MAAM,EAAG;AAACC,UAAAA,aAAa,EAACN;AAAf;AAAV,OAAvD,EACKO,IADL,CACUC,QAAQ,IAAI;AACdN,QAAAA,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACC,IAArB;AACAC,QAAAA,YAAY,CAACC,UAAb,CAAwB,aAAxB;AACAD,QAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACH,OALL,EAKOC,KALP,CAKcpB,CAAD,IAAOqB,KAAK,CAACrB,CAAD,CALzB;AAMH,KAzCkB;;AAEf,UAAMsB,kBAAkB,GAAGJ,YAAY,CAACK,OAAb,CAAqB,aAArB,CAA3B;;AACA,UAAMf,MAAK,GAAGU,YAAY,CAACK,OAAb,CAAqB,OAArB,CAAd;;AACA,SAAK5B,eAAL,GAAuB,KAAKA,eAAL,CAAqB6B,IAArB,CAA0B,IAA1B,CAAvB;AACA,UAAMlB,WAAW,GAAG,KAAKX,eAAL,CAAqB2B,kBAArB,CAApB;AACA,SAAKjB,KAAL,GAAa;AACTC,MAAAA,WAAW,EAAEA,WADJ;AAETG,MAAAA,SAAS,EAAGD;AAFH,KAAb;AAIA,SAAKP,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BuB,IAA1B,CAA+B,IAA/B,CAA5B;AACH;;AAgCDC,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAElC,MAAM,CAACmC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAEnC,MAAM,CAACoC,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADJ,EAEI;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAEpC,MAAM,CAACqC,SAAxC;AAAmD,MAAA,OAAO,EAAE,KAAK3B,oBAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CADJ;AAMH;;AAnD8B;;AAqDnC,eAAeT,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './stylesheets/userLogin.module.css';\n\nclass UserLogout extends Component {\n    constructor(props) {\n        super(props);\n        const currentUserStorage = localStorage.getItem(\"currentUser\");\n        const token = localStorage.getItem(\"token\")\n        this.safelyParseJSON = this.safelyParseJSON.bind(this)\n        const currentUser = this.safelyParseJSON(currentUserStorage)\n        this.state = {\n            currentUser: currentUser,\n            usertoken : token\n        };\n        this.UserLogoutAPIHandler = this.UserLogoutAPIHandler.bind(this);\n    }\n\n    safelyParseJSON = (json) => {\n        // This function cannot be optimised, it's best to\n        // keep it small!\n        var parsed\n\n        try {\n            parsed = JSON.parse(json)\n        } catch (e) {\n            // Oh well, but whatever...\n        }\n\n        return parsed // Could be undefined!\n    }\n\n    UserLogoutAPIHandler = (e) => {\n        e.preventDefault()\n        const user = {\n            email: this.state.currentUser.email,\n            _id : this.state.currentUser._id,\n            token : this.state.usertoken\n        };\n        console.log(user);\n        axios.post('http://localhost:3001/users/logout', user, {header : {authorization:token}})\n            .then(response => {\n                console.log(response.data)\n                localStorage.removeItem(\"currentUser\");\n                localStorage.removeItem(\"token\")\n            }).catch((e) => alert(e));\n    }\n\n    render() {\n        return (\n            <div className={styles.logoutbox}>\n                <h2 className={styles.heading}>Do you want to log out?</h2>\n                <button type=\"submit\" className={styles.submitbtn} onClick={this.UserLogoutAPIHandler}>LOGOUT</button>\n            </div>\n        )\n    }\n}\nexport default UserLogout;"]},"metadata":{},"sourceType":"module"}